{
  "ignition": {
    "version": "3.4.0"
  },
  "passwd": {
    "users": [
      {
        "name": "core",
        "sshAuthorizedKeys": [
          "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINoxUCnyind0cAE1bwFDua8z6LTwkUadoyZXp3vQFCvj jamesstewartmiller@gmail.com"
        ]
      },
      {
        "groups": [
          "video"
        ],
        "name": "motion_user",
        "sshAuthorizedKeys": [
          "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINoxUCnyind0cAE1bwFDua8z6LTwkUadoyZXp3vQFCvj jamesstewartmiller@gmail.com"
        ]
      }
    ]
  },
  "storage": {
    "directories": [
      {
        "path": "/var/local/motion/files",
        "mode": 416
      },
      {
        "path": "/var/home/motion_user/image_build",
        "mode": 432
      }
    ],
    "files": [
      {
        "group": {
          "name": "root"
        },
        "path": "/etc/systemd/user/motion.service",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "https://gist.githubusercontent.com/millerthegorilla/1e37450c79ca493d9b430815b4c18f70/raw/b6f16a775dff2673fc67b4a9f9e8d963af1ac801/motion.service",
          "verification": {
            "hash": "sha512-bbd76742556e7cac491cfe8e9caee0e4cfacfe5b3beb19853e6f7d2274fc2370ca52da5c58c9499dd7317e23862b5498082eb4a5284edf57f4124535ddadf853"
          }
        },
        "mode": 420
      },
      {
        "group": {
          "name": "root"
        },
        "path": "/var/home/motion_user/image_build/motion_mail.py",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "https://gist.githubusercontent.com/millerthegorilla/d45b7e9c464353678ef5f3db107931cc/raw/e981a68fd53736527124ca6c69931615315ee540/motion_mail.py",
          "verification": {
            "hash": "sha512-16cd6fabcebf6877491a905119b7a161772cb905bd653cd9c7545c375a24ef25fc10456a4ea2a461904b096c5a26b07e120602673c10b64727d09ee50bb7b072"
          }
        },
        "mode": 420
      },
      {
        "group": {
          "name": "root"
        },
        "path": "/var/home/motion_user/image_build/Dockerfile",
        "user": {
          "name": "root"
        },
        "contents": {
          "source": "https://gist.githubusercontent.com/millerthegorilla/a4c1cddf27b0d2c986558c265f95fd3a/raw/2a48e237c8d66bf5b4516d1148f7076cba05c55e/Dockerfile.py",
          "verification": {
            "hash": "sha512-240b3fe9c8221902b09a082fd5874c298f50372b6bae4fdc1139b5b3c39abde1502f398018475987589078badeff26ec6857501255969d76968b61c23863f5f6"
          }
        },
        "mode": 416
      },
      {
        "path": "/var/home/motion_user/fail2ban.conf",
        "contents": {
          "source": "https://gist.githubusercontent.com/millerthegorilla/2f4afb747ab38957bba7ec2783acab8c/raw/cae473cc2521e9c85f10356656b1dcc361a097f8/fail2ban.conf",
          "verification": {
            "hash": "sha512-a70d26b79a939629d89289b87c2bbc1ed409ad330848a1961dcc9c05a8b1493774d2c40db05d1c11f8b4f41ee40c0de94b3ffe23b755d62566ce71f62a0196c3"
          }
        },
        "mode": 416
      },
      {
        "group": {
          "name": "root"
        },
        "path": "/etc/default/motion",
        "user": {
          "name": "root"
        },
        "contents": {
          "compression": "",
          "source": "data:,start_motion_daemon%3Dyes"
        },
        "mode": 420
      },
      {
        "path": "/var/home/motion_user/sshd.conf",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/ySLQQ7CMAwE736FX+AmEYVy6EsQh5S4ENEY5BhBf4/SHmd29lLrI12BJU4LJ0Qc0fTDMOfFWHETLYEp3p4se1HXalwSlPhTNl2b62HOkiwXbuTbQXbCEcMX8l1eyvm9reFEjhz5bkB/DuSPAwXnqO/CAf4BAAD//7h/I1ySAAAA"
        }
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "contents": "[Service]\nType=oneshot\n# ExecStartPre=checkmodule -M -m -o /root/mypolicy.mod /root/mypolicy.te\n# ExecStartPre=semodule_package -o /root/mypolicy.pp -m /root/mypolicy.mod\n# ExecStart=semodule -i /root/mypolicy.pp\nExecStart=rpm-ostree install https://mirrors.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm \\\n-E %fedora).noarch.rpm https://mirrors.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm \\\n-E %fedora).noarch.rpm\n[Install]\nWantedBy=multi-user.target",
        "enabled": true,
        "name": "selinux.service"
      }
    ]
  }
}
